---
import Rating from '../Rating.astro';
interface Props {
	userId: number;
	username: string;
	points: number;
	wins: number;
	losses: number;
	winRate: number;
	position: number;
}

const { userId, username, points, wins, losses, winRate, position } = Astro.props;
const image = `https://ui-avatars.com/api/?name=${username}&background=random&size=96`;
const rating = Math.floor(Math.random() * 5) + 1;
const badge = position == 1 ? 'gold' : position == 2 ? 'silver' : 'bronze';
---

<a href={`/duelists/${userId}`} class="card bg-base-200 w-full shadow-xl cursor-pointer">
	<div class="flex flex-col items-center gap-4">
		<figure>
			<img src={image} alt={username} class="w-24 h-24 rounded-full mt-8" transition:name={`img-duelist-${userId}`} transition:animate="none"/>
		</figure>
		<Rating rating={rating} transition:name={`rating-duelist-${userId}`} transition:animate="none"/>
	</div>
  <div class="card-body">
    <h2 class="card-title" transition:name={`title-duelist-${userId}`} transition:animate="none">
      {username}
      <div class="badge badge-secondary">{position}</div>
    </h2>
    <p class="text-sm">Points: {points}</p>
    <p class="text-sm">Wins: {wins}</p>
    <p class="text-sm">Losses: {losses}</p>
    <p class="text-sm">Win Rate: {winRate.toFixed(2)}%</p>
    <p class="text-sm">Position: {position}</p>
		<div class="card-actions justify-end">
			<div class={`badge badge-outline`}>{badge}</div>
    </div>
  </div>
</a>